<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.github.teamb.btob.mapper.adminDelivery.DeliveryMapper">
	
	<!-- 전체 배송 목록 조회 -->
	<select id="selectDeliveryList" resultType="io.github.teamb.btob.dto.adminDelivery.DeliveryDTO">
		SELECT 
			delivery_id deliveryId,
			order_id orderId,
			delivery_status deliveryStatus,
			tracking_no trackingNo,
			carrier_name carrierName,
			ship_from_addr shipFromAddr,
			ship_to_addr shipToAddr,
			reg_dtime regDtime,
			reg_id regId,
			upd_dtime updDtime,
			upd_id updId,
			use_yn useYn,
			order_id2 orderId2
		FROM TB_DELIVERY
		WHERE use_yn = 'Y'
		ORDER BY reg_dtime DESC
	</select>
	
	<!-- 목록에서 특정 배송 정보 수정 -->
	<update id="updateDelivery" parameterType="io.github.teamb.btob.dto.adminDelivery.DeliveryDTO">
		UPDATE TB_DELIVERY
		SET 
			delivery_status = #{deliveryStatus},
			tracking_no = #{trackingNo},
			upd_dtime = NOW(),
			upd_id = #{updId}
		WHERE delivery_id = #{deliveryId}
	</update>
</mapper>